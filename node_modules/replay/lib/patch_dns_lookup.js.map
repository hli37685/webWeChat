{"version":3,"sources":["patch_dns_lookup.js"],"names":["DNS","require","Replay","originalLookup","lookup","domain","options","callback","isLocalhost","family","ip"],"mappings":";;AAAA;;AAEA,MAAMA,MAASC,QAAQ,KAAR,CAAf;AACA,MAAMC,SAASD,QAAQ,IAAR,CAAf;;AAGA,MAAME,iBAAiBH,IAAII,MAA3B;AACAJ,IAAII,MAAJ,GAAa,UAASC,MAAT,EAAiBC,OAAjB,EAA0BC,QAA1B,EAAoC;AAC/C,MAAI,OAAOF,MAAP,KAAkB,QAAlB,IAA8B,OAAOC,OAAP,KAAmB,QAAjD,IACA,OAAOC,QAAP,KAAoB,UADpB,IACkCL,OAAOM,WAAP,CAAmBH,MAAnB,CADtC,EACkE;AAChE,UAAMI,SAASH,QAAQG,MAAR,IAAkB,CAAjC;AACA,UAAMC,KAAMD,WAAW,CAAZ,GAAiB,KAAjB,GAAyB,WAApC;AACAF,aAAS,IAAT,EAAeG,EAAf,EAAmBD,MAAnB;AACD,GALD,MAMEN,eAAeE,MAAf,EAAuBC,OAAvB,EAAgCC,QAAhC;AACH,CARD","file":"patch_dns_lookup.js","sourcesContent":["// Patch DNS.lookup to resolve all hosts added via Replay.localhost as 127.0.0.1\n\nconst DNS    = require('dns');\nconst Replay = require('./');\n\n\nconst originalLookup = DNS.lookup;\nDNS.lookup = function(domain, options, callback) {\n  if (typeof domain === 'string' && typeof options === 'object' &&\n      typeof callback === 'function' && Replay.isLocalhost(domain)) {\n    const family = options.family || 4;\n    const ip = (family === 6) ? '::1' : '127.0.0.1';\n    callback(null, ip, family);\n  } else\n    originalLookup(domain, options, callback);\n};\n\n"],"sourceRoot":"/source/"}